{
    "host_groups": [
        {
            "name": "master",
            "components": [
              { "name" : "AMBARI_SERVER" },
              { "name" : "NAMENODE" },
              { "name" : "SECONDARY_NAMENODE" },
              { "name" : "RESOURCEMANAGER" },
              { "name" : "APP_TIMELINE_SERVER" },
              { "name" : "HISTORYSERVER" },
              { "name" : "WEBHCAT_SERVER" },
              { "name" : "HIVE_SERVER" },
              { "name" : "HIVE_METASTORE" },
              { "name" : "SPARK2_JOBHISTORYSERVER" },
              { "name" : "SPARK2_THRIFTSERVER" },
              { "name" : "MYSQL_SERVER" },
              { "name" : "KNOX_GATEWAY" },

              { "name" : "DATANODE"},
              { "name" : "NODEMANAGER"},
              { "name" : "ZOOKEEPER_SERVER" },

              { "name": "HCAT"},
              { "name": "HDFS_CLIENT"},
              { "name": "YARN_CLIENT"},
              { "name": "HIVE_CLIENT"},
              { "name": "SPARK2_CLIENT"},
              { "name": "ZOOKEEPER_CLIENT"}
            ],
            "cardinality": "1"
        },
        {
            "name": "slaves",
            "components": [
              { "name" : "DATANODE"},
              { "name" : "NODEMANAGER"},
              { "name" : "ZOOKEEPER_SERVER" },

              { "name": "HCAT"},
              { "name": "HDFS_CLIENT"},
              { "name": "YARN_CLIENT"},
              { "name": "HIVE_CLIENT"},
              { "name": "SPARK2_CLIENT"},
              { "name": "ZOOKEEPER_CLIENT"}
            ]
        }
    ],
    "configurations": [
        {
            "cluster-env": {
                "properties_attributes": { },
                "security_enabled": "false",
                "smokeuser": "ambari-qa",
                "user_group": "hadoop",
                "properties": {
                  "ignore_groupsusers_create": "false",
                  "override_uid": "true"
                }
            }
        }
        {% if ambari.enable_kerberos == true %}
        ,{
            "kerberos-env": {
    			"properties_attributes": { },
    			"properties": {
    				"realm": "IBM.COM",
    				"kdc_type": "mit-kdc",
    				"kdc_host": "{{ groups['master'][0] }}.{{ ansible_domain }}",
    				"admin_server_host": "{{ groups['master'][0] }}.{{ ansible_domain }}"
    			}
    		}
    	},
    	{
    		"krb5-conf": {
    			"properties_attributes": { },
    			"properties": {
    				"domains": "IBM.COM",
    				"manage_krb5_conf": "false"
    			}
    		}
    	}
   		{% endif %}
    ],
    "Blueprints": {
        "blueprint_name": "hdp",
        "stack_name": "HDP",
        "stack_version": "2.6"
        {% if ambari.enable_kerberos == true %}
        ,"security": {
    	    "type": "KERBEROS"
    	}
    	{% endif %}
    }
}
